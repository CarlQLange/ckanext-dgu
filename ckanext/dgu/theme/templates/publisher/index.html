<html xmlns:py="http://genshi.edgewall.org/"
  xmlns:i18n="http://genshi.edgewall.org/i18n"
  xmlns:xi="http://www.w3.org/2001/XInclude"
  py:strip="">

  <xi:include href="publisher_util.html" />

  <py:def function="page_title">Publishers</py:def>

  <py:match path="breadcrumbs">
    <li><a href="/publisher">Publishers</a></li>
  </py:match>

  <py:def function="sidebar">
    <div class="search-area">
      <div class="clearfix dgu-equal-height" data-selector=".auto-height">
        <div class="mini">
          <div class="left-inner auto-height form-search">
            <div class="input-group">
              <input class="form-control" type="text" name="q" value="${c.q}" results="0" placeholder="Search for publishers..." />
              <span class="input-group-btn">
                <button type="submit" class="btn btn-default">
                  <i class="icon-search"></i>
                </button>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div><!-- /search-area -->
    <p class="well" style="margin-top: 20px; font-size: 12px; line-height: 17px;">Datasets are 'published' on data.gov.uk by a range of organisations, mainly from the public sector. On this page you can browse and search for them by name or place in a notional hierarchy.</p>
    <div py:if="c.userobj" class="panel panel-info">
      <div class="panel-heading"><strong>Adding New Publishers</strong></div>
      <div class="panel-body">If you are from a public sector body not listed yet, please <a href="/publisher/apply/cabinet-office">get in touch with Cabinet Office data.gov.uk team</a> to request the addition of your publisher</div>
    </div>
  </py:def>

  <py:match path="content" py:with="hierarchy=h.publisher_hierarchy()">
    <h1><span id="publisher-result-count">All </span> Publishers</h1>
    <div class="publisher-hierarchy">
      <py:def function="render_publisher(pub)">
        <div class="publisher">
          <a class="publisher-row" href="/publisher/${pub['name']}">${pub['title']}</a>
          <py:for each="child in pub['children']">
            ${render_publisher(child)}
          </py:for>
        </div>
      </py:def>
      <py:for each="pub in hierarchy">
        ${render_publisher(pub)}
      </py:for>
    </div>
  </py:match>

  <py:def function="optional_footer">
    <script type="text/javascript">
      window.dgu_all_publishers = ${h.groups_as_json(c.all_groups)};
    </script>
    <script src="/scripts/dgu-publisher-index.min.js"></script>
  </py:def>

  <xi:include href="../layout.html" />
</html>
