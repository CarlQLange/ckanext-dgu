<html
  xmlns="http://www.w3.org/1999/xhtml"
  xmlns:i18n="http://genshi.edgewall.org/i18n"
  xmlns:py="http://genshi.edgewall.org/"
  xmlns:xi="http://www.w3.org/2001/XInclude"
  py:strip="">

  <py:def function="map_preview_buttons(package_id, pkg_dict, inline=True)">
  <!--!package_id is for the same package as pkg_dict-->
    <div py:if="h.get_wms_info_urls(pkg_dict)" class="map-buttons">
      <span style="display: none;" class="js-data-id">${package_id}</span>
      <span style="display: none;" class="js-data-title">${pkg_dict.get('title')}</span>
      <span style="display: none;" class="js-data-querystring">${h.get_wms_info_urls(pkg_dict)}</span>
      <span style="display: none;" class="js-data-extent">${','.join(h.get_wms_info_extent(pkg_dict))}</span>
      <span style="${if_(not inline,'display: block;')}">
        <a href="/data/map-preview?${h.get_wms_info_urls(pkg_dict)}${'&amp;n=%s&amp;w=%s&amp;e=%s&amp;s=%s' % h.get_wms_info_extent(pkg_dict) if h.get_wms_info_extent(pkg_dict) else ''}" class="btn btn-default btn-xs btn-info btn-preview preview-now"><i class="icon-map-marker"></i>&nbsp; Preview on Map</a>
      </span>
      <span style="${if_(not inline,'display: block;')}">
        <py:with vars="in_basket=package_id in session.get('preview_list',[])">
        <span 
             class="preview-add js-dataset-${package_id}-add"
             style="${if_(in_basket,'display: none;')}">
               <button data-id="${package_id}" class="btn btn-default btn-xs btn-info btn-preview btn-basket"><i class="icon-shopping-cart"></i>&nbsp; Add to Preview List</button>
        </span>
        <span 
             class="preview-remove js-dataset-${package_id}-remove"
             style="${if_(not in_basket,'display: none;')}">
             <button data-id="${package_id}" class="btn btn-danger btn-xs btn-preview btn-basket"><i class="icon-shopping-cart"></i>&nbsp; Remove from List</button>
        </span>
        </py:with>
      </span>
    </div>
  </py:def>


  <div py:def="basket()" id="shopping-basket-container" class="facet-box-unboxed">
    <a id="shopping-basket-reset" href="#" class="facet-kill pull-right">
      <i class="icon-large icon-remove-sign"></i>
    </a>
    <h4 class="facet-title">Map Preview List</h4>
    <div class="facet-options" id="shopping-basket"></div>
    <a href="/data/map-preview?" id="shopping-basket-submit" class="btn btn-info btn-basket"><span><i class="icon-map-marker"></i>&nbsp; Preview</span></a>
  </div>

</html>


